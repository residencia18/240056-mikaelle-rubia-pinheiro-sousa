import{c as b}from"./chunk-SXK2Z643.js";import{a as B,b as N}from"./chunk-FQ5Z32C4.js";import"./chunk-BJ6UHTC5.js";import{a as he,b as fe,c as _e,d as ge,e as be,f as Ce,g as Ee,h as ye,i as we,j as De,k as xe,l as Te,m as Ae,o as Me}from"./chunk-EBXKZ3ZL.js";import{a as de,b as le}from"./chunk-H3KFRSHM.js";import{b as pe,c as ue,d as Se,e as k,f as ve}from"./chunk-UT2CUAHE.js";import{$a as q,A as v,Aa as L,Da as w,E as H,Ea as D,Eb as I,Fa as x,Fb as U,Gb as K,Hb as z,Ia as P,Jb as J,Kb as g,Mb as Z,Nb as Q,Pb as X,Qb as Y,R as l,Rb as ee,S as p,Sb as te,Tb as ie,Ub as oe,Wb as se,ac as O,b as A,ca as F,ea as m,ec as V,fb as $,ic as ae,ja as r,ka as n,kb as G,la as h,lc as re,mc as ne,pa as y,qa as f,r as C,ra as u,tc as me,u as M,uc as j,vc as ce,w as E,x as W,z as S,za as T}from"./chunk-YJVQKGLP.js";import"./chunk-CQCHLVVT.js";function Re(a,o){if(a&1){let s=y();r(0,"div")(1,"form",1),f("ngSubmit",function(){S(s);let t=u();return v(t.handleSubmitAddSessao())}),r(2,"div",2),h(3,"input",3),r(4,"p-dropdown",4),x("ngModelChange",function(t){S(s);let i=u();return D(i.selectedAtividade,t)||(i.selectedAtividade=t),v(t)}),n(),r(5,"p-dropdown",5),x("ngModelChange",function(t){S(s);let i=u();return D(i.selectedbrincoAnimais,t)||(i.selectedbrincoAnimais=t),v(t)}),n(),r(6,"p-button",6),f("click",function(){S(s);let t=u();return v(t.addbrinco(t.selectedbrincoAnimais))}),n(),h(7,"input",7),r(8,"div",8),h(9,"p-button",9),n()()()()}if(a&2){let s=u();l(),m("formGroup",s.addSessaoForm),l(3),m("options",s.atividades_sessao),w("ngModel",s.selectedAtividade),l(),m("options",s.brinco_animais),w("ngModel",s.selectedbrincoAnimais),l(),m("disabled",s.selectedbrincoAnimais==0),l(3),m("disabled",!s.addSessaoForm.valid)}}function We(a,o){if(a&1){let s=y();r(0,"div")(1,"form",1),f("ngSubmit",function(){S(s);let t=u();return v(t.handleEditSessao())}),r(2,"div",2),h(3,"input",3),r(4,"p-dropdown",4),x("ngModelChange",function(t){S(s);let i=u();return D(i.selectedAtividade,t)||(i.selectedAtividade=t),v(t)}),n(),h(5,"input",7),r(6,"div",8),h(7,"p-button",9),n()()()()}if(a&2){let s=u();l(),m("formGroup",s.editSessaoForm),l(3),m("options",s.atividades_sessao),w("ngModel",s.selectedAtividade),l(3),m("disabled",!s.addSessaoForm.valid)}}var Oe=(()=>{let o=class o{handleEditSessao(){throw new Error("Method not implemented.")}constructor(e,t,i,c,d,_){this.messageService=e,this.sessaoService=t,this.formBuilder=i,this.router=c,this.ref=d,this.sessaoDtService=_,this.destroy$=new A,this.atividades_sessao=se.vacinas,this.brinco_animais=[],this.selectedbrincoAnimais=0,this.selectedAtividade="",this.sessaoDatas=[],this.sessaoListDatas=[],this.brincosSelected=[],this.addSessaoForm=this.formBuilder.group({data_atividade:["",{validators:[g.required],updateOn:"blur"}],atividade:["",{validators:[g.required],updateOn:"blur"}],animais:["",{validators:[g.required],updateOn:"blur"}],descricao:["",{validators:[g.required],updateOn:"blur"}]}),this.editSessaoForm=this.formBuilder.group({data_atividade:["",{validators:[g.required],updateOn:"blur"}],atividade:["",{validators:[g.required],updateOn:"blur"}],animais:["",{validators:[g.required],updateOn:"blur"}],descricao:["",{validators:[g.required],updateOn:"blur"}]}),this.addSessaovent=b.ADD_SESSAO_EVENT,this.editSessaovent=b.EDIT_SESSAO_EVENT}ngOnInit(){this.sessaoAction=this.ref.data,this.brinco_animais=this.sessaoDtService.listBrinco,this.sessaoAction?.event?.action==this.editSessaovent&&this.getSessaoSelectedDatas(this.sessaoAction?.event?.id),this.getAllSessao()}getAllSessao(){this.sessaoService.getAllSessao().pipe(C(this.destroy$)).subscribe({next:e=>{e.length>0&&(this.sessaoDatas=e)},error:e=>{console.log(e),this.router.navigate(["/dashboard"]),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao buscar sess\xF5es",life:2500})}})}handleSubmitAddSessao(){if(this.addSessaoForm?.value&&this.addSessaoForm?.valid){let e=this.addSessaoForm.value.atividade,t=this.addSessaoForm.value.data_atividade,i=this.sessaoDatas.some(d=>d.atividade===e),c=this.sessaoDatas.some(d=>d.data_atividade===t);if(i&&c)this.messageService.add({severity:"error",summary:"Erro",detail:"O brinco j\xE1 foi adicionado anteriormente.",life:3e3});else{let d={data:this.addSessaoForm.value?.data_atividade||"",atividade:this.addSessaoForm.value?.atividade||"",animais:this.brincosSelected.map(_=>_.toString()),descricao:this.addSessaoForm.value?.descricao||""};console.log("Add suino",d),this.sessaoService.addSessao(d).pipe().subscribe({next:_=>{_&&this.messageService.add({severity:"success",summary:"Sucesso",detail:"Sess\xE3o adicionado com sucesso!",life:2500})},error:_=>{console.log(_),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao adicionar sess\xE3o",life:2e3})}})}}this.addSessaoForm.reset()}getSessaoSelectedDatas(e){throw new Error("Method not implemented.")}addbrinco(e){this.brincosSelected.includes(e)?console.log("O brinco j\xE1 est\xE1 na lista:",e):(this.brincosSelected.push(e),console.log("brincos ADD",this.brincosSelected))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};o.\u0275fac=function(t){return new(t||o)(p(V),p(B),p(te),p(I),p(ue),p(N))},o.\u0275cmp=E({type:o,selectors:[["app-sessao-form"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"card","flex","flex-column","md:flex-column","gap-3"],["pInputText","","type","date","placeholder","Data da Atividade","formControlName","data_atividade"],["styleClass","w-full","placeholder","Atividade do animal","formControlName","atividade",3,"options","ngModel","ngModelChange"],["styleClass","w-full","placeholder","Brinco do animal","formControlName","animais",3,"options","ngModel","ngModelChange"],["label","Adicionar animal",3,"disabled","click"],["pInputText","","type","text","placeholder","Descricao","formControlName","descricao"],[1,"flex","flex-row","justify-content-center","align-content-center","align-items-center","m-1"],["type","submit","label","Concluir",3,"disabled"]],template:function(t,i){t&1&&F(0,Re,10,7,"div",0)(1,We,8,4,"div",0),t&2&&(m("ngIf",i.ref.data.event.action===i.addSessaovent),l(),m("ngIf",i.ref.data.event.action===i.editSessaovent))},dependencies:[q,X,J,Z,Q,Y,ee,j,de,_e]});let a=o;return a})();function He(a,o){if(a&1){let s=y();r(0,"tr")(1,"th",7)(2,"div",8)(3,"div",8),T(4," Data da Sess\xE3o "),n(),r(5,"div",8),h(6,"p-sortIcon",9)(7,"p-columnFilter",10),n()()(),r(8,"th",11)(9,"div",8)(10,"div",8),T(11," Descri\xE7\xE3o "),n(),r(12,"div",8),h(13,"p-sortIcon",12)(14,"p-columnFilter",13),n()()(),r(15,"div",14)(16,"p-button",15),f("onClick",function(){S(s);let t=u();return v(t.handleSessaoEvent(t.addSessaovent))}),n()()()}a&2&&(l(7),m("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),l(7),m("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function qe(a,o){if(a&1){let s=y();r(0,"tr")(1,"td"),T(2),n(),r(3,"td"),T(4),n(),r(5,"td")(6,"div",16)(7,"button",17),f("click",function(){let i=S(s).$implicit,c=u();return v(c.handleSessaoDetalhesEvent(c.editSessaovent,i.id))}),n(),r(8,"button",18),f("click",function(){let i=S(s).$implicit,c=u();return v(c.handleSessaoEvent(c.editSessaovent,i.id))}),n(),r(9,"button",19),f("click",function(){let i=S(s).$implicit,c=u();return v(c.handleDeleteSessao(i.id,i.descricao))}),n()()()()}if(a&2){let s=o.$implicit;l(2),L(s.data),l(2),L(s.descricao)}}var $e=()=>["dataPesagem","pesoKg"],Ge=()=>({"min-width":"75rem"}),Ve=(()=>{let o=class o{constructor(){this.Sessao_=[],this.sessaoEvent=new M,this.sessaoDetalhesEvent=new M,this.deleteSessao=new M,this.addSessaovent=b.ADD_SESSAO_EVENT,this.editSessaovent=b.EDIT_SESSAO_EVENT,this.detalhesSessaovent=b.DETALHES_SESSAO_EVENT}ngOnInit(){}handleSessaoEvent(e,t){if(e&&e!==" "){let i=t&&t!==""?{action:e,id:t}:{action:e};console.log("EventDataSessao",i),this.sessaoEvent.emit(i)}}handleSessaoDetalhesEvent(e,t){if(e&&e!==" "){let i=t&&t!==""?{action:e,id:t}:{action:e};console.log("EventDataSessaoDetralhes",i),this.sessaoDetalhesEvent.emit(i)}}handleDeleteSessao(e,t){e!==""&&t!==""&&this.deleteSessao.emit({id:e,descricao:t})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=E({type:o,selectors:[["app-sessao-table"]],inputs:{Sessao_:"Sessao_"},outputs:{sessaoEvent:"sessaoEvent",sessaoDetalhesEvent:"sessaoDetalhesEvent",deleteSessao:"deleteSessao"},decls:7,vars:11,consts:[[1,"grid"],[1,"col-12"],["header","Historico da Sess\xE3o","styleClass","shadow-3 m-5 text-indigo-800"],["data","id","currentPageReportTemplate","Mostrando {first} de {last} de sess\xF5es",3,"value","rows","paginator","responsive","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["HistoricoTable",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","data_atividade"],[1,"flex","justify-content-between","align-items-center"],["field","data_atividade"],["type","text","field","data_atividade","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","pesoKg"],["field","descricao"],["type","text","field","pesoKg","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center"],["styleClass","p-button-info","icon","pi pi-plus","label","Adicionar","pTooltip","Adicionar produto","tooltipPosition","top",3,"onClick"],[1,"flex","justify-content-center","grap-3","align-content-center","align-items-center"],["pButton","","pRipple","","icon","pi pi-history","pTooltip","Detalhes da Sess\xE3o","tooltipPosition","top","routerLink","/detalhesSessao","routerLinkActive","exact_route",1,"p-button-secondary",3,"click"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar","tooltipPosition","top",1,"p-button-secondary",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","pTooltip","Remover","tooltipPosition","top",1,"p-button-danger",3,"click"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3,4),x("selectionChange",function(d){return D(i.SessaoSelected,d)||(i.SessaoSelected=d),d}),F(5,He,17,6,"ng-template",5)(6,qe,10,2,"ng-template",6),n()()()()),t&2&&(l(3),m("value",i.Sessao_)("rows",10)("paginator",!0)("responsive",!0)("globalFilterFields",P(9,$e))("tableStyle",P(10,Ge)),w("selection",i.SessaoSelected),m("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[U,K,re,ae,me,j,Ce,Ee,ye,we,he]});let a=o;return a})();var je=(()=>{let o=class o{constructor(e,t,i,c,d,_){this.sessaoService=e,this.messageService=t,this.router=i,this.sessaoDataTransferService=c,this.confirmationService_sessao=d,this.dialogService=_,this.destroy$=new A,this.sessaoList=[]}ngOnInit(){this.getServiceSessaoData(),this.sessaoDataTransferService.setListabrinco()}getServiceSessaoData(){let e=this.sessaoDataTransferService.getSessaoDatas();e.length>0?this.sessaoList=e:this.getAPISessaoDtas(),console.log("DADOS DOS SSESSAO",this.sessaoList)}getAPISessaoDtas(){this.sessaoService.getAllSessao().pipe(C(this.destroy$)).subscribe({next:e=>{e.length>0&&(this.sessaoList=e)},error:e=>{console.log(e),this.router.navigate(["/dashboard"]),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao buscar sesss\xF5es",life:2500})}})}handleSessaoEvent(e){e&&(this.ref=this.dialogService.open(Oe,{header:e?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:e,sessaoList:this.sessaoList}}),this.ref.onClose.pipe(C(this.destroy$)).subscribe({next:()=>this.getAPISessaoDtas()}))}handleSessaoDetalhesEvent(e){e.id!==void 0&&this.sessaoDataTransferService.setIdSessao(e.id)}handleDeleteSessao(e){e&&this.deleteSessao(e.id)}deleteSessao(e){e&&this.sessaoService.deleteSessao(e).pipe(C(this.destroy$)).subscribe({next:t=>{t&&this.messageService.add({severity:"success",summary:"Sucesso",detail:"Sess\xE3o removido com sucesso!",life:2500}),this.getAPISessaoDtas()},error:t=>{console.log(t),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao deletar Sess\xE3o",life:2e3})}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};o.\u0275fac=function(t){return new(t||o)(p(B),p(V),p(I),p(N),p(O),p(k))},o.\u0275cmp=E({type:o,selectors:[["app-sessao-home"]],decls:2,vars:1,consts:[[3,"Sessao_","sessaoEvent","deleteSessao","sessaoDetalhesEvent"]],template:function(t,i){t&1&&(h(0,"app-toolbar-navigation"),r(1,"app-sessao-table",0),f("sessaoEvent",function(d){return i.handleSessaoEvent(d)})("deleteSessao",function(d){return i.handleDeleteSessao(d)})("sessaoDetalhesEvent",function(d){return i.handleSessaoDetalhesEvent(d)}),n()),t&2&&(l(),m("Sessao_",i.sessaoList))},dependencies:[pe,Ve]});let a=o;return a})();var ke=[{path:"",component:je}];var Wt=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=W({type:o}),o.\u0275inj=H({providers:[k,O],imports:[$,ie,oe,G,z.forChild(ke),ne,ce,De,xe,Te,le,Ae,be,Se,ge,Me,fe,ve]});let a=o;return a})();export{Wt as SessaoModule};
